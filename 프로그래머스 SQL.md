## 프로그래머스 SQL

#### SUM, MAX, MIN

##### 1번

```sql
SELECT min(DATETIME)
FROM ANIMAL_INS;
```



##### 2번

```sql
SELECT count(*)
FROM ANIMAL_INS;
```



##### 3번

```sql
SELECT count(DISTINCT NAME)
FROM ANIMAL_INS
WHERE NAME IS NOT NULL;
```



### GROUP BY 

##### 1번

```sql
SELECT ANIMAL_TYPE, COUNT(ANIMAL_TYPE) as count
FROM ANIMAL_INS
GROUP BY ANIMAL_TYPE
ORDER BY ANIMAL_TYPE;
```



##### 2번

```sql
SELECT NAME, COUNT(ANIMAL_ID) as COUNT
FROM ANIMAL_INS
GROUP BY NAME
HAVING NAME IS NOT NULL and COUNT >= 2
ORDER BY NAME;
```



##### 3번

```sql
-- 코드를 입력하세요
SELECT HOUR(DATETIME) as HOUR, COUNT(ANIMAL_ID) as COUNT
FROM ANIMAL_OUTS
GROUP BY HOUR
# HAVING HOUR >= 9 AND HOUR <= 19 
HAVING HOUR BETWEEN 9 AND 19
ORDER BY HOUR;
```



##### 5번

**RECURSIVE 가상 테이블**

```SQL
WITH RECURSIVE TIME AS (
    SELECT 0 as n
    UNION ALL
    SELECT n+1 FROM TIME WHERE n < 23
)
SELECT n AS HOUR, COUNT(ANIMAL_ID) AS COUNT
FROM TIME LEFT JOIN ANIMAL_OUTS ON n = HOUR(DATETIME)
GROUP BY n
ORDER BY n;
```



#### IS NULL

##### 1번

```SQL
SELECT ANIMAL_ID
FROM ANIMAL_INS
WHERE NAME IS NULL;
```



##### 2번

```SQL
SELECT ANIMAL_ID
FROM ANIMAL_INS
WHERE NAME IS NOT NULL
ORDER BY ANIMAL_ID;
```



##### 3번

**IFNULL(값, 대체값)**

```SQL
SELECT ANIMAL_TYPE, IFNULL(NAME,'No name'), SEX_UPON_INTAKE
FROM ANIMAL_INS
ORDER BY ANIMAL_ID;
```



#### JOIN

##### 1번

`NOT IN` 활용 

```SQL
SELECT ANIMAL_ID, NAME
FROM ANIMAL_OUTS
WHERE ANIMAL_ID NOT IN (SELECT ANIMAL_ID FROM ANIMAL_INS)
ORDER BY ANIMAL_ID;
```



##### 2번

```SQL
SELECT ANIMAL_INS.ANIMAL_ID, ANIMAL_INS.NAME
FROM ANIMAL_INS LEFT OUTER JOIN ANIMAL_OUTS ON ANIMAL_INS.ANIMAL_ID = ANIMAL_OUTS.ANIMAL_ID
WHERE ANIMAL_INS.DATETIME > ANIMAL_OUTS.DATETIME
ORDER BY ANIMAL_INS.DATETIME;
```



##### 3번

```SQL
SELECT INS.NAME, INS.DATETIME
FROM ANIMAL_INS AS INS
WHERE INS.ANIMAL_ID NOT IN (SELECT ANIMAL_ID FROM ANIMAL_OUTS)
ORDER BY DATETIME
LIMIT 3;
```



##### 4번

```SQL
SELECT OUTS.ANIMAL_ID, OUTS.ANIMAL_TYPE, OUTS.NAME
FROM ANIMAL_OUTS AS OUTS
LEFT JOIN ANIMAL_INS AS INS USING(ANIMAL_ID)
WHERE OUTS.SEX_UPON_OUTCOME != INS.SEX_UPON_INTAKE  
ORDER BY OUTS.ANIMAL_ID;
```



### String, Date

##### 1번

```SQL
SELECT ANIMAL_ID, NAME, SEX_UPON_INTAKE
FROM ANIMAL_INS
WHERE NAME IN ( 'Lucy', 'Ella', 'Pickle', 'Rogan', 'Sabrina', 'Mitty');
```



##### 2번

```SQL
SELECT ANIMAL_ID, NAME
FROM ANIMAL_INS
WHERE ANIMAL_TYPE = 'Dog' AND NAME REGEXP 'EL'
# WHERE ANIMAL_TYPE = 'Dog' AND NAME LIKE '%EL%'
ORDER BY NAME;
```



##### 3번

```SQL
# SELECT ANIMAL_ID, NAME, IF(SEX_UPON_INTAKE REGEXP 'Neutered|Spayed','O','X') AS '중성화'
SELECT ANIMAL_ID, NAME, IF(SEX_UPON_INTAKE LIKE 'Intact%','X','O') AS '중성화'
FROM ANIMAL_INS
ORDER BY ANIMAL_ID;
```



##### 4번

```SQL
SELECT OUTS.ANIMAL_ID, OUTS.NAME
FROM ANIMAL_OUTS AS OUTS LEFT JOIN ANIMAL_INS AS INS USING(ANIMAL_ID)
ORDER BY DATEDIFF(OUTS.DATETIME, INS.DATETIME) DESC
LIMIT 2;
```



##### 5번

**DATE_FORMAT(datetime, format)**

```SQL
SELECT ANIMAL_ID, NAME, DATE_FORMAT(DATETIME, '%Y-%m-%d') AS '날짜'
FROM ANIMAL_INS
ORDER BY ANIMAL_ID
```

